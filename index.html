<!-- Hello World! -->
<!-- https://github.com/nwgreenl/typehere.lol -->
<!-- https://buymeacoffee.com/nwgreenl -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>type here</title>
  <link rel="icon" type="image/x-icon" href="favicon.png">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/preact@latest/dist/preact.min.js"></script>
  <script src="https://unpkg.com/preact@latest/hooks/dist/hooks.umd.js"></script>
</head>
<body>
  <div id="app"></div>
  <script>
    const { h, render } = preact;
    const { useState, useEffect, useRef } = preactHooks;

    const App = () => {
      const [text, setText] = useState(localStorage.getItem("text") || "");
      const [darkMode, setDarkMode] = useState(localStorage.getItem("darkMode") === "true");
      const toggleContainerRef = useRef(null);
      const toggleDarkMode = () => setDarkMode(!darkMode);

      useEffect(() => {
        localStorage.setItem("text", text);
      }, [text]);

      useEffect(() => {
        localStorage.setItem("darkMode", darkMode);
        document.body.classList.toggle("dark-mode", darkMode);
        toggleContainerRef.current.classList.toggle("dark", darkMode);
      }, [darkMode]);

      if(darkMode) document.body.classList.toggle("dark-mode", true)

      return h(
        "div",
        null,
        h("textarea", {
          value: text,
          onInput: (e) => setText(e.target.value),
          placeholder: "type here...",
        }),
        h(
          "div",
          {
            class: "toggle-container" + (darkMode ? " dark" : ""),
            onClick: toggleDarkMode,
            ref: toggleContainerRef,
          },
          h("div", { class: "toggle-circle" }),
          h("div", { class: "icon sun" }, "‚òÄÔ∏è"),
          h("div", { class: "icon moon" }, "üåô"),
        ),
      );
    };

    render(h(App), document.getElementById("app"));
  </script>
</body>
</html>
